package com.ssafy.offline19;
import java.util.*;
import java.awt.Point;
import java.io.*;
/*
 * ���� �ϳ� �ǳʶپ ���� ���� ����, �� ���� 2�� �̻��� ���� ���� �� ����.
 * -> ���� ��ų�, �̵��ϰų�
 *
 * 1��, 2�� �̵��� ���� ��⸸
 * 3��°�� �̵��� �� �ִ� ���� ���� ���� ���
 * 
 * 3�������̸鼭 ���� �� �ִ� �͵� üũ
 */
public class Expert2 {
	static int[][] dir = {{-1, 0}, {0, 1}, {1, 0}, {0, -1}};
	static int N, result=0;
	static int[][] map;
	static boolean[][] visited;
	static Point canon;
	public static void main(String[] args) throws IOException {
		BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
		StringTokenizer st;
		StringBuilder sb = new StringBuilder();
		int TC = Integer.parseInt(br.readLine());
		for (int tc = 1; tc <= TC; ++tc) {
			N = Integer.parseInt(br.readLine());
			map = new int[N][N];
			visited = new boolean[N][N];
			for(int i = 0 ; i < N ; ++i) {
				st = new StringTokenizer(br.readLine());
				for(int j = 0 ; j < N ; ++j) {
					int x = Integer.parseInt(st.nextToken());
					if(x == 2) {
						canon = new Point(j, i);
						continue;
					}
					map[i][j] = x;
				}
			}
			dfs(canon, 0);
			
			sb.append("#" + tc + " " + result + "\n");
		}

		System.out.println(sb);
	}
	
	//visited[y][x] = true -> ���� ��, �ش� ��ġ���� Ž�� ����
	//map[y][x] == 0 -> ���� ���� ��. ���� ���ų� ���� ���� ��
	static void dfs(Point po, int cnt) {
		if(cnt == 3) {//3��° ���࿡�� �湮�� ���� 1�̸�(���̸�) �湮 ó���ϰ� ����
			if(map[po.y][po.x] == 1) {
				map[po.y][po.x] = 0;
				result += 1;
			}
			return;
		}
		
		
		//Ž���ؼ� �°��� ���̸� �� ����
		if(map[po.y][po.x] == 1) {
			map[po.y][po.x] = 0;
			result += 1;
		}
		visited[po.y][po.x] = true; 
		
		for(int i = 0 ; i < 4 ; ++i) {
			int nx = po.x;
			int ny = po.y;
			int flag = 0;
			while(true) {
				nx += dir[i][0];
				ny += dir[i][1];
				if(!checkRange(nx, ny)) break; // ���� ����� ����
				
				if(visited[ny][nx]) continue; //�湮 �� ���̸� �ǳʶ�
				if(map[ny][nx] == 1 && flag == 0) {//ù ��° 1�� ������ flag�� 1�� �������
					flag += 1;
					continue;
				}
				
				//flag�� 1�̸� ù ���� �ǳ� �پ���, dfs����.
				//flag�� 2�̸� �� ��° ����. ������ ��ƾ���
				if( flag == 1) {
					if(map[ny][nx] == 1) {
						flag += 1;
					}
					dfs(new Point(nx,ny), cnt+1);
					visited[ny][nx] = false;
				}
				
			}
			
		}
	
	}
	static boolean checkRange(int x, int y) {
		return (0 <= x && x < N && 0 <= y && y < N);
	}
	static int catchEgg() {
		int cnt = 0;
		for(int i = 0 ; i < N ; ++i) {
			for(int j = 0 ; j < N ; ++j) {
				if(visited[i][j] ) cnt++;
			}
		}
		return cnt;
	}
}
///*
// * ����
//������ : ��� �� ����
//
//
//
//���� ����
//
//����ð� : 50���� �׽�Ʈ ���̽��� ���ļ� C/C++�� ��� 3��, JAVA�� ��� 3��, Python 10��
//
//�� �� �� : Heap, Global, Stack ���� ��� ���� �ִ� 256MB���� ��� ���� (��, ������ �ִ� 1MB���� ��� ����)
//
//���� Ƚ�� ����
//
//���� ����
//
//ä��
//
//Accept : Sample_input���� ä���� ���������� ����Ǿ��ٴ� �ǹ�
//
//            (�ܼ��� ������ ���� �� ���ٴ� �ǹ��̸� ������ �������� ����)
//
//Fail : ������, ��Ÿ�� ���� ������ 0��
//
//��
//
//Sample_input�� ���Ǹ� ���� �����ϸ�, ���� ä���� ������ �򰡿� input���� �̷������.
//
//
//
//  
//
//
//
//��� ������ �پ��� ��(�Ǵ� ��)�� �����ϰ� �ִ�.
//
//
//
// 
//
//
//
//�� �� "��" �� �� ���� �ٸ� ���� �Ѿ�� �̵� �Ǵ� �� �ٸ� ���� ���� �� �ִ� ���̴�.
//
//
//
//[Fig. 1] ���� ǥ�õ� ������ ���� ���� �̵��� �� �ִ� ��ġ�̸�, ������ ���� �ٸ� ���� ���� ������ �� ���� ���� �� �ִ�.
//
//
//
// 
//
//
//
//
//
//
//[Fig.1]
//
//
//
//  
//
//
//
//�Ʒ� [Fig. 2]�� 2�������� ������ ����ǿ����� �����̴�.
//
//
//
//10 X 10 ũ���� ����ǿ� �� 1���� ���� �ƴ� ��� �˵��� ������ �ִ�.
//
//
//
//�Ʒ� �׸����� ���� 1�� �������� ���� �� �ִ� ���� ��������� ǥ�õ� ��� �� 2���̴�.
//
//
//
//������ ���� �ٸ� ���� ���� ������ ���� �̵��� �� �ִ� ��ġ�̴�.
//
//
//
// 
//
//
//
//
//
//
// 
//
//
//
//[Fig. 2]
//
//
//
// 
//
//
//
//�Ʒ��� [Fig. 3-1] �� ���� ���� 1�� �̵� �� �ٽ� �ѹ� �̵��ϰ� �Ǿ��� ���� �����ش�.
//
//
//
//2��° �̵��ϴ� ��� 2���� �� (�Ķ������� ǥ��)�� ���� �� �ִ� ���̸�,
//
//
//
//������ ���� ���� ���� �ʰ� �̵��� �� �ִ� ��ġ�� ��Ÿ����.
//
//
//
// 
//
//
//
//
//
//
// 
//
//   [Fig. 3-1]
//
//
//
//
//
//[Fig. 3-1]�� ���� ���� 2�� �̵��ϴ� ��츦 ��� ����ϸ� [Fig. 3-2]�� ���� ��Ÿ�� �� �ִ�.
//
//����� ��� ���� 1ȸ �̵��ϴ� ��� ���� �� �ִ� ���̸�, 2ȸ �̵����� �� ���� �� �ִ� �Ķ��� ��� �˱��� �� 4���� ���� ���ɼ��� �ִ� ���� �ȴ�.
//
//
//
// 
//
//
//
//
//
//
//    [Fig. 3-2]
//
// 
//
//
//
//�Ʒ��� [Fig. 4]�� ���� 3�� �����̴� ��� ���� �� �ִ� �˵��� �����ش�.
//
//
//
//���� 3�� �����̴� ���� ���� ���ɼ��� �ִ� ���� �� 15�� �̴�.
//
//
//
// 
//
//
//
//1�� �̵��� �� ���� �� �ִ� ��� ���� ��������� ǥ�õ� 2���̸�,
//
//
//
//2�� �̵��� �� ���� �� �ִ� ��� ���� �Ķ������� ǥ�õ� 2���̰�,
//
//
//
//3�� �̵��� �� ���� �� �ִ� ��� ���� �ʷϻ����� ǥ�õ� 11�� �̴�.
//
//
//
// 
//
//
//
//
//
//
//    [Fig. 4]
//
//
//
// 
//
//
//
//�̿� ���� ���� 3�� �����̴� ���� ���� ���ɼ��� �ִ� ���� ���� ���϶�.
//
//
//
// 
//
//
//
//
//[�������]
//1. ������� �׻� ����, ���� ���� N���� �̷���� �ִ�. (1 �� N �� 50)
//
//
//
//2. ���� 3������ �����̸�, 1��~3������ �̵��ϴ� ���� ���� �� �ִ� ���� ���� ���ɼ��� �ִ� ���̴�.
//
//
//
//3. ���� ������ �ٸ� �˵��� �������� �ʴ´�.
//
//
//
//4. ���� �ݵ�� �ϳ��� ���� �Ѿ �����̸�, �� �������ε� ������ �� �ִ�.
//
//
//
//5. ���� ����� ������ ���� �� ����.
//
//
//
//6. ���� �ٸ� ���� �Ѿ� ���� ���� �� �Ǵ� ���� �� ������ �� �� ������ 2�� �̻��� ���� �Ѿ �� ����.
//
//
//
//7. ���� Ư���� ���� �Ѿ �� �ٽ� �Ѿ�� �� �ִ�.
//
//
//
//8. ���� 1���� �����Ѵ�.
//
//
//
//
//[�Է�]
//�Է��� ���� ù �ٿ��� �� �׽�Ʈ ���̽��� ���� T�� �־�����.
//�� ���� �ٺ��ʹ� �� �׽�Ʈ ���̽��� �־�����.
//
//
//
//�� �׽�Ʈ ���̽��� ù �ٿ��� ������� ũ�� N�� �־�����.
//���� N ���� �ٿ��� ������� ���°� �Էµȴ�.
//
//
//
//���� 0�� �� ������ �ǹ��ϸ�, ���� 1�� ���� �ƴ� ��� ���� �ǹ��ϸ�, ���� 2�� ���� �ǹ��Ѵ�.
//
//
//[���]
//�׽�Ʈ ���̽� t�� ���� ����� ��#t���� ���, �� ĭ ��� ���� �����̴� ���� ���� �� �ִ� ��� ���� ���� ����Ѵ�. (t�� �׽�Ʈ���̽��� ��ȣ�� �ǹ��ϸ� 1���� �����Ѵ�.)
//����, ���� �� �ִ� ��� ���� ���ٸ� 0�� ����϶�.
//
//
//[���� �Է�]
//
//
//5                                          //�� �׽�Ʈ ���̽� ���� T=5
//
//5                                          //ù ��° �׽�Ʈ ���̽�, ������� ũ�� N=5
//
//0 1 0 0 1            
//
//1 1 0 0 0
//
//0 1 1 0 1
//
//0 0 2 0 0
//
//1 0 1 1 0
//
//10                                         //�� ��° �׽�Ʈ ���̽�, ������� ũ�� N=10
//
//0 1 0 0 0 0 0 0 0 0
//
//0 0 0 0 1 0 0 0 0 0
//
//0 1 1 0 1 0 0 1 0 0
//
//0 0 0 0 1 0 0 0 0 0
//
//0 1 1 0 0 0 0 0 0 0
//
//0 0 0 0 2 0 1 0 1 0
//
//0 0 0 0 0 0 1 0 0 0
//
//1 0 1 1 0 0 1 0 0 0
//
//0 0 0 0 0 0 0 0 1 0
//
//0 1 0 0 1 0 1 1 0 0
//
//20                                         //�� ��° �׽�Ʈ ���̽�, ������� ũ�� N=20
//
//0 0 0 0 1 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0
//
//0 0 0 1 0 0 0 0 0 1 0 0 1 0 0 0 0 0 0 0
//
//0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
//
//0 1 0 0 0 0 2 0 0 0 0 0 0 1 0 0 0 0 0 0
//
//0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0
//
//0 0 0 0 1 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0
//
//0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0
//
//0 0 0 0 1 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0
//
//0 0 0 0 0 1 0 1 0 0 0 0 1 0 0 0 0 0 0 0
//
//0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 1 0 0 0 0
//
//0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 1 0 0
//
//1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
//
//0 0 0 0 1 0 0 0 0 0 0 0 1 0 0 0 0 0 1 0
//
//1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0
//
//0 1 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0
//
//0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0
//
//0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
//
//0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0
//
//0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0
//
//0 0 0 0 0 0 0 0 0 0 1 0 1 0 0 0 0 0 0 0
//
//��                                         //�������� sample_input.txt ����
//
//
//
//
//[���� �Է¿� ���� ���� ���]
//
//#1 4
//
//#2 15
//
//#3 18
//
//#4 0
//
//#5 102
//
//
//*
// 

